{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/GaneshSurna/Desktop/react-redux/shopping-cart-redux-async-practice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/GaneshSurna/Desktop/react-redux/shopping-cart-redux-async-practice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { createSlice } from \"@reduxjs/toolkit\";\nimport { uiActions } from \"./ui-slice\";\nvar initialCartState = {\n  cartItems: [],\n  totalQuantity: 0,\n  isChanged: false\n};\nvar cartSlice = createSlice({\n  name: \"cart\",\n  initialState: initialCartState,\n  reducers: {\n    addItemToCart: function addItemToCart(state, action) {\n      var newItem = action.payload;\n      var existingItem = state.cartItems.find(function (item) {\n        return item.id === newItem.id;\n      });\n      if (!existingItem) {\n        state.cartItems.push({\n          id: newItem.id,\n          title: newItem.title,\n          price: newItem.price,\n          quantity: 1,\n          description: newItem.description,\n          totalPrice: newItem.price\n        });\n      } else {\n        existingItem.quantity++;\n        existingItem.totalPrice += existingItem.price;\n      }\n      state.totalQuantity++;\n      state.isChanged = true;\n    },\n    removeItemFromCart: function removeItemFromCart(state, action) {\n      var id = action.payload;\n      var existingItemIndex = state.cartItems.findIndex(function (item) {\n        return item.id === id;\n      });\n      var existingItem = state.cartItems[existingItemIndex];\n      if (existingItem.quantity === 1) {\n        state.cartItems.splice(existingItemIndex, 1);\n      } else {\n        existingItem.totalPrice -= existingItem.price;\n        existingItem.quantity--;\n      }\n      state.totalQuantity--;\n      state.isChanged = true;\n    }\n  }\n});\nexport default cartSlice.reducer;\nexport var cartActions = cartSlice.actions;\nexport var putRequest = function putRequest(cart) {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch) {\n      var httpRequest, _httpRequest;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            _httpRequest = function _httpRequest3() {\n              _httpRequest = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n                var response;\n                return _regeneratorRuntime().wrap(function _callee$(_context) {\n                  while (1) switch (_context.prev = _context.next) {\n                    case 0:\n                      dispatch(uiActions.setNotification({\n                        status: \"pending\",\n                        title: \"Pending...\",\n                        message: \"Sending cart data!\"\n                      }));\n                      _context.next = 3;\n                      return fetch(\"https://food-app-a6f82-default-rtdb.firebaseio.com/cart.json\", {\n                        mathod: \"PUT\",\n                        // headers: {\n                        //     \"Content-Type\":\"application/json\",\n                        // },\n                        body: JSON.stringify(cart)\n                      });\n                    case 3:\n                      response = _context.sent;\n                      if (response.ok) {\n                        _context.next = 6;\n                        break;\n                      }\n                      throw new Error(\"Error\");\n                    case 6:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }, _callee);\n              }));\n              return _httpRequest.apply(this, arguments);\n            };\n            httpRequest = function _httpRequest2() {\n              return _httpRequest.apply(this, arguments);\n            };\n            _context2.prev = 2;\n            _context2.next = 5;\n            return httpRequest();\n          case 5:\n            dispatch(uiActions.setNotification({\n              status: \"success\",\n              title: \"Success!\",\n              message: \"Successfully sent cart data!\"\n            }));\n            _context2.next = 11;\n            break;\n          case 8:\n            _context2.prev = 8;\n            _context2.t0 = _context2[\"catch\"](2);\n            dispatch(uiActions.setNotification({\n              status: \"error\",\n              title: \"Error!\",\n              message: \"Failed to send cart data!\"\n            }));\n          case 11:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2, null, [[2, 8]]);\n    }));\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};","map":{"version":3,"names":["createSlice","uiActions","initialCartState","cartItems","totalQuantity","isChanged","cartSlice","name","initialState","reducers","addItemToCart","state","action","newItem","payload","existingItem","find","item","id","push","title","price","quantity","description","totalPrice","removeItemFromCart","existingItemIndex","findIndex","splice","reducer","cartActions","actions","putRequest","cart","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","dispatch","httpRequest","_httpRequest","wrap","_callee2$","_context2","prev","next","_httpRequest3","_callee","response","_callee$","_context","setNotification","status","message","fetch","mathod","body","JSON","stringify","sent","ok","Error","stop","apply","arguments","_httpRequest2","t0","_x"],"sources":["C:/Users/GaneshSurna/Desktop/react-redux/shopping-cart-redux-async-practice/src/store/cart-slice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { uiActions } from \"./ui-slice\";\r\n\r\nconst initialCartState={\r\n    cartItems:[],\r\n    totalQuantity:0,\r\n    isChanged:false,\r\n};\r\n\r\nconst cartSlice=createSlice({\r\n    name:\"cart\",\r\n    initialState:initialCartState,\r\n    reducers:{\r\n        addItemToCart(state,action){\r\n            const newItem=action.payload;\r\n            const existingItem=state.cartItems.find((item)=>{\r\n                return item.id===newItem.id;\r\n            });\r\n            if(!existingItem){\r\n                state.cartItems.push({\r\n                    id:newItem.id,\r\n                    title:newItem.title,\r\n                    price:newItem.price,\r\n                    quantity:1,\r\n                    description:newItem.description,\r\n                    totalPrice:newItem.price,\r\n                })\r\n            }\r\n            else{\r\n                existingItem.quantity++;\r\n                existingItem.totalPrice+=existingItem.price;\r\n            }\r\n            state.totalQuantity++;\r\n            state.isChanged= true;\r\n        },\r\n        removeItemFromCart(state,action){\r\n            const id=action.payload;\r\n            const existingItemIndex=state.cartItems.findIndex((item)=>{\r\n                return item.id===id;\r\n            });\r\n            const existingItem=state.cartItems[existingItemIndex];\r\n            if(existingItem.quantity===1){\r\n                state.cartItems.splice(existingItemIndex,1);\r\n            }\r\n            else{\r\n                existingItem.totalPrice-=existingItem.price;\r\n                existingItem.quantity--;\r\n            }\r\n            state.totalQuantity--;\r\n            state.isChanged= true;\r\n        }\r\n    }\r\n});\r\n\r\nexport default cartSlice.reducer;\r\n\r\nexport const cartActions= cartSlice.actions;\r\n\r\n\r\nexport const putRequest=(cart)=>{\r\n    return async(dispatch)=>{\r\n        async function httpRequest(){\r\n            dispatch(uiActions.setNotification({\r\n                status:\"pending\",\r\n                title:\"Pending...\",\r\n                message:\"Sending cart data!\"\r\n            }));\r\n            const response= await fetch(\"https://food-app-a6f82-default-rtdb.firebaseio.com/cart.json\",{\r\n                mathod: \"PUT\",\r\n                // headers: {\r\n                //     \"Content-Type\":\"application/json\",\r\n                // },\r\n                body: JSON.stringify(cart),\r\n            });\r\n    \r\n            if(!response.ok){\r\n                throw new Error(\"Error\");\r\n            }\r\n        }\r\n\r\n        try{\r\n            await httpRequest();\r\n            dispatch(uiActions.setNotification({\r\n                status:\"success\",\r\n                title:\"Success!\",\r\n                message:\"Successfully sent cart data!\",\r\n            }));\r\n        }\r\n        catch(err){\r\n            dispatch(uiActions.setNotification({\r\n                status:\"error\",\r\n                title:\"Error!\",\r\n                message:\"Failed to send cart data!\",\r\n            }));\r\n        }\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}